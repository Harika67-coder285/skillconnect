{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Browse Projects - SkillConnect</title>

  <!-- Bootstrap -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'css/main.css' %}" rel="stylesheet">

  <style>
    /* Keep same CSS as browse.html to maintain consistency */
    :root{
      --accent:#0d83fd;
      --card-bg:#ffffff;
      --muted: #6c757d;
      --radius:12px;
      --shadow: 0 8px 30px rgba(14, 30, 37, 0.06);
    }

    body{
      font-family: "Roboto", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #f5f7fb;
      color: #212529;
      margin: 0;
      padding-top: 88px;
    }

    header.header { position: fixed; top:0; left:0; right:0; z-index: 999; background: rgba(255,255,255,0.97); box-shadow: 0 2px 12px rgba(0,0,0,0.05); }

    .page-hero{
      padding: 40px 0;
      background: linear-gradient(180deg,#ffffff 0%, #f7f9fc 100%);
      border-bottom: 1px solid rgba(0,0,0,0.04);
    }
    .page-hero .container { display:flex; align-items:center; justify-content:space-between; gap:16px; flex-wrap:wrap; }

    .search-wrap {
      display:flex;
      gap:8px;
      width: 100%;
      max-width: 820px;
    }

    .search-wrap .form-control {
      border-radius: 10px;
      padding: 12px 14px;
      border: 1px solid rgba(0,0,0,0.08);
      box-shadow:none;
    }

    .search-wrap .btn {
      border-radius: 10px;
      padding: 10px 18px;
    }

    .filters {
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .chip {
      background: #fff; padding:8px 12px; border-radius: 20px; border:1px solid rgba(0,0,0,0.06); font-size:14px;
      display:inline-flex; align-items:center; gap:8px;
    }

    .results { padding: 36px 0; }

    .grid {
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    /* Project Card (reuse freelancer card styles) */
    .freelancer-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: var(--shadow);
      display:flex;
      gap: 16px;
      align-items:flex-start;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .freelancer-card:hover { transform: translateY(-6px); box-shadow: 0 14px 30px rgba(14,30,37,0.12); }

    .freelancer-body { flex:1; min-width:0; }
    .freelancer-head { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
    .freelancer-name { font-weight:700; margin:0; font-size:1.05rem; }
    .freelancer-role { color:var(--muted); font-size:0.95rem; margin-top:4px; }

    .freelancer-tags { display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 12px; }
    .tag { background:#f1f6ff; color:var(--accent); border-radius:10px; padding:6px 10px; font-size:13px; font-weight:600; border:1px solid rgba(13,131,253,0.06); }

    .freelancer-meta { display:flex; gap:16px; color:var(--muted); font-size:14px; align-items:center; flex-wrap:wrap; }

    .cta-col { display:flex; flex-direction:column; gap:8px; align-items:flex-end; }
    .btn-hire { background: var(--accent); color: #fff; border: none; padding: 8px 14px; border-radius:10px; font-weight:600; }

    .no-results { text-align:center; padding: 60px 20px; color:var(--muted); }

    @media (max-width: 1024px){ .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 640px){ .grid { grid-template-columns: 1fr; body { padding-top:110px; } .cta-col { align-items:flex-start; } }}

  </style>
</head>
<body class="index-page">

<!-- Header (same as browse.html) -->
<header id="header" class="header d-flex align-items-center fixed-top">
  <div class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
    <a href="{% url 'home' %}" class="logo d-flex align-items-center me-auto me-xl-0">
      <img src="{% static 'img/logo.png'%}" alt="SkillConnect Logo" />
      <h1 class="sitename">SkillConnect</h1>
    </a>

    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="{% url 'home' %}" class="active">Home</a></li>
        <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
        <li><a href="{% url 'how_it_works' %}">How It Works</a></li>
      </ul>
      <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </nav>
  </div>
</header>

<!-- Hero / Search -->
<section class="page-hero">
  <div class="container">
    <div style="flex:1; min-width:260px;">
      <h2 style="margin:0 0 6px 0; font-weight:700;">Browse Projects</h2>
      <p style="margin:0; color:var(--muted)">Find projects matching your skills, location, or budget.</p>
    </div>

    <div style="flex:1; display:flex; justify-content:flex-end;">
      <form class="search-wrap" onsubmit="event.preventDefault(); applyFilters()">
        <input id="q" class="form-control" placeholder="Search projects, skills or keywords" />
        <select id="skill" class="form-control" style="max-width:200px;">
          <option value="">All skills</option>
          <option value="webdev">Web Development</option>
          <option value="design">Design</option>
          <option value="datasci">Data Science</option>
          <option value="mobile">Mobile Apps</option>
        </select>
        <button class="btn btn-primary" type="submit">Search</button>
      </form>
    </div>

    <div class="filters" style="width:100%; margin-top:12px;">
      <div class="chip"> <i class="bi bi-geo-alt"></i> India</div>
      <div class="chip"> <i class="bi bi-clock"></i> Hourly Projects</div>
      <div class="chip"> <i class="bi bi-award"></i> Top Rated Clients</div>
    </div>
  </div>
</section>

<!-- Results -->
<main class="results container">
  <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
    <div style="font-weight:700; font-size:18px;">Showing <span id="count">6</span> projects</div>
    <div style="color:var(--muted)">Sort by:
      <select id="sort" onchange="applyFilters()" style="border:0; background:transparent; color:var(--muted); font-weight:600;">
        <option value="relevance">Relevance</option>
        <option value="budget_low">Budget: Low to High</option>
        <option value="budget_high">Budget: High to Low</option>
      </select>
    </div>
  </div>

  <div style="height:18px;"></div>
  <div id="grid" class="grid"></div>

  <div id="no-results" class="no-results" style="display:none;">
    <p style="font-size:18px;">No projects match your search.</p>
    <p style="color:var(--muted); margin-top:6px;">Try clearing filters or try different keywords.</p>
  </div>
</main>

<!-- Footer -->
<footer style="padding:40px 0; text-align:center; color:var(--muted);">
  © <strong>SkillConnect</strong> • Freelancer dashboard demo
</footer>

<script>
  const projects = [
    { id:1, title:"Build e-commerce website", skills:["React","Django"], budget:20000, location:"Hyderabad", postedBy:"ABC Corp"},
    { id:2, title:"Mobile App UI/UX", skills:["Figma","Flutter"], budget:15000, location:"Bangalore", postedBy:"XYZ Ltd"},
    { id:3, title:"Data Science Model", skills:["Python","ML"], budget:25000, location:"Mumbai", postedBy:"Analytics Inc"},
    { id:4, title:"Website redesign", skills:["UI/UX","CSS"], budget:12000, location:"Delhi", postedBy:"DesignHub"},
    { id:5, title:"Mobile Game Development", skills:["Unity","C#"], budget:30000, location:"Chennai", postedBy:"GameStudio"},
    { id:6, title:"Digital Marketing Campaign", skills:["SEO","Google Ads"], budget:10000, location:"Pune", postedBy:"MarketingPros"}
  ];

  const grid = document.getElementById('grid');
  const countEl = document.getElementById('count');
  const noResults = document.getElementById('no-results');

  function createCard(project){
    const div = document.createElement('div');
    div.className='freelancer-card';
    div.innerHTML=`
      <div class="freelancer-body">
        <div class="freelancer-head">
          <div style="min-width:0">
            <p class="freelancer-name">${project.title}</p>
            <div class="freelancer-role">Skills: ${project.skills.join(", ")} · <span style="color:var(--muted); font-weight:600;">${project.location}</span></div>
            <div style="margin-top:8px; color:var(--muted); font-size:14px;">Posted by: ${project.postedBy} | Budget: ₹${project.budget}</div>
          </div>
          <div class="cta-col">
            <button class="btn btn-hire" onclick="applyProject(${project.id})">Apply</button>
          </div>
        </div>
      </div>
    `;
    return div;
  }

  function render(list){
    grid.innerHTML='';
    if(!list || list.length===0){
      noResults.style.display='block';
      countEl.textContent=0;
      return;
    } else { noResults.style.display='none'; }
    countEl.textContent = list.length;
    list.forEach(p=>grid.appendChild(createCard(p)));
  }

  render(projects);

  function applyFilters(){
    const q = (document.getElementById('q').value || '').toLowerCase().trim();
    const skill = (document.getElementById('skill').value || '').toLowerCase();
    const sort = document.getElementById('sort').value;

    let list = projects.filter(p=>{
      const inQ = q === '' || p.title.toLowerCase().includes(q) || p.skills.join(' ').toLowerCase().includes(q) || p.postedBy.toLowerCase().includes(q);
      const inSkill = skill === '' || p.skills.join(' ').toLowerCase().includes(skill);
      return inQ && inSkill;
    });

    if(sort==='budget_low') list.sort((a,b)=>a.budget-b.budget);
    if(sort==='budget_high') list.sort((a,b)=>b.budget-a.budget);

    render(list);
  }

  function applyProject(id){ alert("Apply flow for project ID: "+id); }
</script>

<script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>